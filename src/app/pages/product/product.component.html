@if (message) {
  <div class="alert alert-danger m-4">
    {{ message }}
  </div>
}

@if (product) {
  <div class="container my-4">

    <div class="row g-4">
      <div class="col-md-4">
        <img
          [src]="product.thumbnail"
          [alt]="product.title"
          class="img-fluid rounded border"
        />
      </div>

      <div class="col-md-8">
        <h2>{{ product.title }}</h2>
        <p class="text-muted">{{ product.category }}</p>

        <p>{{ product.description }}</p>

        <div class="d-flex gap-3 align-items-center">
          <span class="fw-bold">{{ product.price }} €</span>
          <span class="badge bg-success">
            -{{ product.discountPercentage }}%
          </span>
        </div>

        <div class="mt-2">
          <span class="badge bg-primary">
            ⭐ {{ product.rating }}
          </span>
          <span
            class="badge ms-2"
            [class.bg-success]="product.availabilityStatus === 'In Stock'"
            [class.bg-danger]="product.availabilityStatus !== 'In Stock'"
          >
            {{ product.availabilityStatus }}
          </span>
        </div>

        <p class="mt-3">
          Stock : {{ product.stock }} <br />
          Livraison : {{ product.shippingInformation }}
        </p>
      </div>
    </div>

    <hr class="my-4" />

    <h4>Avis</h4>

    @if (product.reviews) {
      <div class="list-group">
        @for (review of product.reviews; track review.reviewerEmail) {
          <div class="list-group-item">
            <div class="d-flex justify-content-between">
              <strong>{{ review.reviewerName }}</strong>
              <span>⭐ {{ review.rating }}</span>
            </div>
            <p class="mb-1">{{ review.comment }}</p>
            <small class="text-muted">
              {{ review.date | date:'short' }}
            </small>
          </div>
        }
      </div>
    } @else {
      <p class="text-muted">Aucun avis</p>
    }

  </div>
}
